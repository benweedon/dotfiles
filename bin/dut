#!/usr/bin/env bash

set -o errexit
set -o nounset
set -o pipefail
if [[ "${TRACE-0}" == "1" ]]; then
    set -o xtrace
fi

main() {
    find . -maxdepth 1 -type d | \
        cut -d/ -f2- | \
        tr '\n' '\0' | \
        # Need to use `read` because for some reason `du` will stop processing
        # after seeing the `.` directory.
        while read -d '' D; do echo -e "$(du -hs "$D")"; done | \
        sort -hr
}

main "$@"
