#!/usr/bin/env bash

set -o errexit
set -o nounset
set -o pipefail
if [[ "${TRACE-0}" == "1" ]]; then
    set -o xtrace
fi

main() {
    ls -A | \
        tr '\n' '\0' | \
        while read -d '' D; do echo -e "$(find "$D" -type f | wc -l)\t$D"; done | \
        sort -nr
}

main "$@"
